close all; clear all; clc;

data = [  0 1 0 1 1 1 0 1 0 1 1 1 1 1 0 1 1 0 1 1;
              1 1 1 1 1 1 1 0 0 1 0 0 0 0 1 1 1 1 1 0;
              1 1 1 1 1 1 1 0 1 1 0 0 0 0 1 1 1 1 1 0;
              1 1 1 1 1 1 1 0 0 1 0 0 0 0 1 1 1 1 1 0;
              0 0 0 0 1 1 0 1 0 0 1 0 1 1 0 0 0 0 1 1;
              
              1 1 1 1 1 1 1 1 0 0 1 1 1 1 1 1 1 1 0 1;
              0 0 0 0 0 0 0 0 0 0 0 0 1 1 0 0 0 0 0 0;
              0 0 0 0 0 0 0 0 1 0 0 0 0 0 0 0 0 0 1 0;
              0 0 0 0 0 0 0 0 0 0 1 0 1 0 0 0 0 0 0 0;
              1 1 1 1 0 0 0 1 0 1 0 0 1 1 1 1 1 0 0 1;
              
              1 1 1 1 1 1 1 1 0 0 1 1 1 1 1 1 1 1 0 1;
              0 0 0 0 0 0 0 0 0 0 0 0 1 1 0 0 0 0 0 0;
              0 0 0 0 0 0 0 0 1 0 0 0 0 0 0 0 0 0 1 0;
              0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 1 1 0 0;
              1 0 0 1 0 0 1 1 0 1 0 0 1 1 1 0 0 0 0 1;
              
              1 1 1 1 1 1 1 1 0 1 1 1 1 1 1 1 1 0 0 1;
              1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0;
              1 0 0 0 0 0 0 0 1 0 0 0 0 0 0 0 0 0 1 0;
              1 0 0 0 0 0 0 0 0 0 1 0 0 1 0 0 1 0 0 0;
              1 1 1 1 0 0 1 1 0 1 0 0 1 1 1 0 0 1 0 1;
              
              1 1 0 1 1 1 0 1 0 0 1 1 1 1 0 1 1 0 0 0;
              0 1 1 1 1 0 1 0 0 1 0 1 0 0 1 0 0 1 0 1;
              0 1 1 1 1 0 1 0 1 1 0 1 0 0 1 0 0 1 1 1;
              0 1 1 1 1 0 1 0 0 0 0 1 0 0 1 0 0 1 0 1;
              1 0 0 0 1 0 0 1 0 0 1 1 1 1 0 0 1 0 0 0];

dimensions = [10 10];
coverstep = 50; 
initNeighbor = 1;
topologyFcn = 'hextop';
distanceFcn = 'dist'; 

net = selforgmap(dimensions, coverstep, initNeighbor, topologyFcn, distanceFcn);
net.trainFcn = 'trainbu'; 
net.trainParam.epochs = 600;
net.trainParam.lr = 0.25;
[net, tr] = train(net, data);
y = net(data);
indexOfOutput = vec2ind(y); 